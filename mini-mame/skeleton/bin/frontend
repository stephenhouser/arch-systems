#!/bin/bash
# Launch and maintain our frontend
#  - restart if chosen
#  - start a shell on exit if asked
#  - restart

#result=$(for i in 20 40 60 80 100 ; do echo $i; sleep 1; done | Xdialog --title "Exit" --timeout 5 --guage "Restart in 5 seconds" 20 80)

while true ; do

	/usr/bin/attract

	# when we exit, see what I want to do...
	result=$(Xdialog --title "Exiting..." \
				--timeout 5 \
				--cancel-label "Restart" \
				--ok-label "Start Shell" \
				--yesno "System will shutdown in 5 seconds" 10 40)

	dialog_code=$?
	case ${dialog_code} in
			0)
					echo Start a shell
					xterm
					;;
			1)
					echo Restart (logout and back in)
					reboot
					;;
			255)
					echo Shutdown...
					# TODO: Update this to shut the system down
					logout
					;;
	esac
done